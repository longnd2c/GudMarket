<th:block th:include="/common/admin/top"></th:block>  
<th:block th:include="/common/admin/navbar"></th:block> 
<th:block th:include="/common/admin/sidebar"></th:block> 
<script>
	document.title='GudMarket - Admin Dashboard - Manage Post'
</script>

<div class="app-main__outer">
  <div class="app-main__inner">
      <div class="app-page-title">
          <div class="page-title-wrapper">
            <div class="page-title-heading">
                <div class="page-title-icon">
                    <i class="pe-7s-drawer icon-gradient bg-happy-itmeo">
                    </i>
                </div>
                <div>Post
                    <div class="page-title-subheading">All Posts
                    </div>
                </div>
            </div>
            
            </div>
          </div>
      
<div class="row">
        <div class="col-lg-12">
            <div class="main-card mb-3 card">
                <div class="card-body">
                <div class="row">
                    <div class="col-7">
                        <h3>Post</h3>
                    </div>
                    
                    <div class="col-3">
                    	<div class="search-wrapper">
		                    <div class="input-holder">
		                    
							    <form th:action="@{/searchPost}">
							      <input th:value="${searchKey}" type="text" class="search-input" placeholder="Type to search" name="searchKey">
							    </form>
							    <button class="search-icon"><span></span></button>
							  
        
		                    </div>
		                    <button class="close"></button>
		                </div>
                    </div>
                    
                </div>
                
                    <table class="mb-0 table table-striped">
                        <thead>
                        <tr>
                            <th>ID Post</th>
                            <th>Title</th>
                            <th>Username/Email</th>
                            <th>ID Type</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="p : ${listPost}">
                            <td th:text="${p.id_post}"></td>
                            <td th:text="${p.title}"></td>
                            <td th:text="${p.username}"></td>
                            <td th:text="${p.type.type_name}"></td>
                            <td th:text="${#dates.format(p.date, 'dd-MM-yyyy')}"></td>
                            <td th:text="${p.status}"></td>
                            <td>
                            
                            <!-- SHOW button -->
                            	<button type ="button" class="btn btn-sm btn-info delete-product" style="color:#fff;" data-toggle="modal"
                    				th:attr="data-target='#showModal'+ ${p.id_post}"><i class="fas fa-eye"></i>
                    				DETAIL
                            	</button>
                            	<!-- Update button -->
                            	<a th:if="${p.status==false}" th:href="@{/post-update/} + ${p.id_post}" class="btn btn-sm btn-success edit-product" style="color:#fff;">
	                            	<span style="display:none;"></span>
	                            	<i class="fas fa-check"></i>
	                            	APPROVAL
                            	</a>
                            	
                            	<!-- Delete button -->
                            	<button type ="button" class="btn btn-sm btn-danger delete-product" style="color:#fff;" data-toggle="modal"
                    				th:attr="data-target='#delModal'+ ${p.id_post}"><i class="fas fa-trash-alt"></i>
                    				DELETE
                            	</button>
                            	
                            	<!-- Yes/No confirm -->
                            	<div class="modal fade" th:id="'delModal' + ${p.id_post}">
				                    <div class="modal-dialog">
				                        <div class="modal-content">
				
				                            <!-- Modal Header -->
				                            <div class="modal-header">
				                                <h4 class="modal-title">Are you sure?</h4>
				                                <button type="button" class="close" data-dismiss="modal">&times;</button>
				                            </div>
				
				                            <!-- Modal footer -->
				                            <div class="modal-footer">
				                            	<a th:href="@{/postDelete/} + ${p.id_post}"><button
				                                        type="button" class="btn btn-info">Yes</button></a>
				                                <button type="button" class="btn btn-danger"
				                                    data-dismiss="modal">Close</button>
				                                
				                            </div>
				                        </div>
				                    </div>
				                </div>
				                
				                <!-- Show info -->
                            	<div class="modal fade" th:id="'showModal' + ${p.id_post}">
					                    <div class="modal-dialog">
					                        <div class="modal-content">
					
					                            <!-- Modal Header -->
					                            <div class="modal-header">
					                                <h4 class="modal-title">Post Information</h4>
					                                <button type="button" class="close" data-dismiss="modal">&times;</button>
					                            </div>
					                            <div class="modal-body">
						                            <div class="position-relative form-group"><label>Post ID</label>
	                                                    	<input th:value="${p.id_post}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Title</label>
	                                                    	<input th:value="${p.title}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Username/Email</label>
	                                                    	<input th:value="${p.username}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Type</label>
	                                                    	<input th:value="${p.type.type_name}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Description</label>
	                                                    	<textarea th:text="${p.description}" class="form-control" readonly></textarea>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Price</label>
	                                                    	<input th:value="${p.price}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Contact</label>
	                                                    	<input th:value="${p.contact}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Image</label>
	                                                 	<div th:if="${p.img!=null}">
	                                                    	<img th:each="img : ${p.img.split('@')}" th:src="@{${img}}" alt="" style="width:200px; height:200px; margin:10px;"/>
	                                                    </div>
	                                                    <input th:if="${p.img==null}" value="No Image" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Date</label>
	                                                    	<input th:value="${#dates.format(p.date, 'dd-MM-yyyy')}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Priority</label>
	                                                    	<input th:value="${#dates.format(p.priority, 'dd-MM-yyyy')}" type="text" class="form-control" readonly>
	                                                 </div>
	                                                 <div class="position-relative form-group"><label>Status</label>
	                                                    	<input th:value="${p.status}" type="text" class="form-control" readonly>
	                                                 </div>
					                            	
					                            </div>
					                            <!-- Modal footer -->
					                            <div class="modal-footer">
					                                <button type="button" class="btn btn-danger"
					                                    data-dismiss="modal">Close</button>
					                            </div>
					                        </div>
					                    </div>
				                </div>
				                
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
</div>


  <th:block th:include="/common/admin/footer"></th:block>  